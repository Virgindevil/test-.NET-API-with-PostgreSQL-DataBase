# API ÐœÐµÐ½ÐµÐ´Ð¶ÐµÑ€ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚Ð° Ð¿Ð¾ÐºÑƒÐ¿Ð¾Ðº 

ÐŸÐµÑ‚-Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð´Ð»Ñ ÑÑ‚Ð°Ð¶Ð¸Ñ€Ð¾Ð²ÐºÐ¸ Ð² **Ozon Tech**.  
Ð ÐµÐ°Ð»Ð¸Ð·ÑƒÐµÑ‚ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚Ð°Ð¼Ð¸ Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð² Ð¾Ñ‚ Ozon Ð¿Ñ€Ð¾Ð´Ð°Ð²Ñ†Ð°Ð¼ (ÑÐµÐ»Ð»ÐµÑ€Ð°Ð¼): ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð½Ð° Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚, Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑÐ¾Ð², Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ ÑÐ¾ ÑÐºÐ»Ð°Ð´ÑÐºÐ¾Ð¹ Ð»Ð¾Ð³Ð¸ÑÑ‚Ð¸ÐºÐ¾Ð¹.

> **Ð¡Ñ‚ÐµÐº**: C#, .NET, ASP.NET Core Web API, Entity Framework Core, PostgreSQL, xUnit

---

## Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»

-  Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ð½Ð° Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚ (`POST /api/returns`)
-  Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ ÑÑƒÑ‰ÐµÑÑ‚Ð²Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¿Ñ€Ð¾Ð´Ð°Ð²Ñ†Ð° Ð¸ Ñ‚Ð¾Ð²Ð°Ñ€Ð°
-  Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð² PostgreSQL
-  Unit-Ñ‚ÐµÑÑ‚Ñ‹ (xUnit + EF Core In-Memory)
-  ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¹ Ð¿Ñ€Ð¸ Ð·Ð°Ð¿ÑƒÑÐºÐµ

**Ð‘Ð¸Ð·Ð½ÐµÑ-ÑÑ†ÐµÐ½Ð°Ñ€Ð¸Ð¹**:  
ÐŸÑ€Ð¾Ð´Ð°Ð²ÐµÑ† ÑÐ¾Ð·Ð´Ð°Ñ‘Ñ‚ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð½Ð° Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚ Ð±Ñ€Ð°ÐºÐ¾Ð²Ð°Ð½Ð½Ð¾Ð³Ð¾ Ð¸Ð»Ð¸ Ð¾ÑˆÐ¸Ð±Ð¾Ñ‡Ð½Ð¾ Ð´Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð½Ð¾Ð³Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€Ð°. Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ÑÑ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ Ð·Ð°ÑÐ²ÐºÑƒ Ð² ÑÑ‚Ð°Ñ‚ÑƒÑÐµ `CREATED`.

---

## ðŸ›  Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´ÐµÑ‚Ð°Ð»Ð¸

### ÐœÐ¾Ð´ÐµÐ»Ð¸
- `Seller` â€” Ð¿Ñ€Ð¾Ð´Ð°Ð²ÐµÑ† (`Id`, `Name`, `ContactEmail`)
- `Product` â€” Ñ‚Ð¾Ð²Ð°Ñ€ (`Id`, `Sku`, `Name`, `Category`)
- `ReturnRequest` â€” Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð½Ð° Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚  
  (`SellerId`, `ProductId`, `Quantity`, `Reason`, `Status`, `CreatedAt`)

### ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°
- Ð§Ð¸ÑÑ‚Ð¾Ðµ Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ: ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ñ‹ â†’ DbContext â†’ Ð¼Ð¾Ð´ÐµÐ»Ð¸
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ `record` Ð´Ð»Ñ DTO
- Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð½Ð° ÑƒÑ€Ð¾Ð²Ð½Ðµ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ð°
- ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¹ EF Core

### Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
- Unit-Ñ‚ÐµÑÑ‚Ñ‹ Ð´Ð»Ñ `ReturnsController`
- Ð˜Ð·Ð¾Ð»ÑÑ†Ð¸Ñ Ð¾Ñ‚ Ð‘Ð” Ñ‡ÐµÑ€ÐµÐ· `Microsoft.EntityFrameworkCore.InMemory`
- ÐŸÐ¾ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ ÑÑ†ÐµÐ½Ð°Ñ€Ð¸ÐµÐ²: Ð²Ð°Ð»Ð¸Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ, ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð·Ð°Ð¿Ð¸ÑÐ¸

---

## ÐšÐ°Ðº Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ

### Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ
- [.NET 8 SDK](https://dotnet.microsoft.com/download/dotnet/8.0)
- [PostgreSQL 16](https://postgrespro.ru/products/postgrespro/standard)

### Ð¨Ð°Ð³Ð¸
1. ÐšÐ»Ð¾Ð½Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹:
   ```bash
   git clone https://github.com/Virgindevil/test-.NET-API-with-PostgreSQL-DataBase.git
   cd test-.NET-API-with-PostgreSQL-DataBase
   ```

2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº PostgreSQL:  
   Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ PostgreSQL Ñ:
   - **ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ**: `postgres`
   - **ÐŸÐ°Ñ€Ð¾Ð»ÑŒ**: `*********` (ÑÐµÐºÑ€ÐµÑ‚Ð½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ)

3. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ API:
   ```bash
   cd src/SellerReturnApi
   dotnet run
   ```

4. API Ð±ÑƒÐ´ÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð½Ð°:
   - **Swagger UI**: [`http://localhost:5079/swagger`](http://localhost:5079/swagger)
   - **Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ð¹ Ð°Ð´Ñ€ÐµÑ**: `http://localhost:5079`

### ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°

```bash
curl -X POST http://localhost:5079/api/returns \
  -H "Content-Type: application/json" \
  -d '{
    "sellerId": "00000000-0000-0000-0000-000000000001",
    "productId": "00000000-0000-0000-0000-000000000002",
    "quantity": 3,
    "reason": "DEFECT"
  }'
```

>  ÐŸÐµÑ€ÐµÐ´ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¾Ð¹ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² Ð‘Ð” (ÑÐ¼. Ñ€Ð°Ð·Ð´ÐµÐ» Ð½Ð¸Ð¶Ðµ).

---

## ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…

ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÐµÑÑŒ Ðº `returns_db` Ñ‡ÐµÑ€ÐµÐ· DBeaver/psql Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ:

```sql
-- ÐŸÑ€Ð¾Ð´Ð°Ð²ÐµÑ†
INSERT INTO "Sellers" ("Id", "Name", "ContactEmail")
VALUES ('00000000-0000-0000-0000-000000000001', 'Test Seller', 'test@example.com');

-- Ð¢Ð¾Ð²Ð°Ñ€
INSERT INTO "Products" ("Id", "Sku", "Name", "Category")
VALUES ('00000000-0000-0000-0000-000000000002', 'SKU-123', 'Test Product', 'Electronics');
```

---

## Ð—Ð°Ð¿ÑƒÑÐº Ñ‚ÐµÑÑ‚Ð¾Ð²

```bash
dotnet test
```

---

## Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```
src/
â””â”€â”€ SellerReturnApi/          # ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Web API
tests/
â””â”€â”€ SellerReturnApi.UnitTests/ # Unit-Ñ‚ÐµÑÑ‚Ñ‹ (xUnit)
```

---

## ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ ÑÑ‚Ð¾Ñ‚ Ð¿Ñ€Ð¾ÐµÐºÑ‚?

- ÐŸÐ¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚ ÑÑ‚ÐµÐºÑƒ Ozon: **.NET Core, C#, PostgreSQL**
- Ð ÐµÐ°Ð»Ð¸Ð·ÑƒÐµÑ‚ **Ñ‚ÐµÐ¾Ñ€ÐµÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð±Ð¸Ð·Ð½ÐµÑ-ÐºÐµÐ¹Ñ** Ð¸Ð· Ð²Ð°ÐºÐ°Ð½ÑÐ¸Ð¸ 
- Ð”ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð¸Ñ€ÑƒÐµÑ‚ **production-ready Ð¿Ð¾Ð´Ñ…Ð¾Ð´**: Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸, Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ, Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
- Ð“Ð¾Ñ‚Ð¾Ð² Ðº Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸ÑŽ: Ð¼Ð¾Ð¶Ð½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑÑ‹ `PICKED`/`SHIPPED`, Ð°Ð´Ð¼Ð¸Ð½ÐºÐ¸ ÑÐºÐ»Ð°Ð´Ð°, Ð¾Ñ‚Ñ‡Ñ‘Ñ‚Ñ‹

---

> **ÐÐ²Ñ‚Ð¾Ñ€**: ÐœÐ°Ñ‚ÑƒÐ·Ð¾Ð² Ð¡ÐµÑ€Ð³ÐµÐ¹
> **Ð¦ÐµÐ»ÑŒ**: Ð¡Ñ‚Ð°Ð¶Ð¸Ñ€Ð¾Ð²ÐºÐ° Ð² Ozon Tech â€” Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ C# / .NET
```
